{% extends "base.html" %}
{% load i18n %}

{% block body_classes %}class="results"{% endblock %}

{% block content %}

<form class="search" method="get" action="{{ target }}">
    <fieldset>
        <label for="q">
            <span class="visuallyhidden">{% trans "Climate science theory" %}</span>
            <input id="q" name="q" required autofocus placeholder="{% trans "Check a theory" %}" type="search" />
        </label>
        <input type="submit" value="{% trans "Search" %}" />
    </fieldset>
</form>

<div class="clearfix"></div>
<ul id="results">
    {% for author, articles in results %}
    <li>
        <div class="author-info">
            <h2 class="author-name">{{ author.name }}</h2>
            <p class="author-meta">
            {% blocktrans with score=author.isi_score %}ISI Score: {{ score }}{% endblocktrans %}
            &bull;
            {% blocktrans with count=author.articles.count %}{{ count }} articles published{% endblocktrans %}
            <span class="actions">
            &bull;
            <a href="http://google.com/search?q={{ author.name|urlencode }}">{% blocktrans %}Search{% endblocktrans %}</a>
            </span>
            </p>
        </div>
        <ul class="articles">
            {% for article in articles %}
            <li><a href="{{ article.url }}">{{ article.title }} &bull; {{ article.publish_date|date:_("M Y") }}</a></li>
            <div class="snippet">{{ article.abstract }}</div>
            {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>

{% endblock %}
